name: Bit Init
on:
  push

jobs:
  build:
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      GIT_USER_NAME: ${{ secrets.GIT_USER_NAME }}
      GIT_USER_EMAIL: ${{ secrets.GIT_USER_EMAIL }}
      BIT_CONFIG_USER_TOKEN: ${{ secrets.BIT_CONFIG_USER_TOKEN }}
      PR_NUMBER: ${{ github.event.number }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Read the PR number
        env:
          PR_NUMBER: ${{ github.event.number }}
        run: |
          echo "From Bash: ${PR_NUMBER}"
          node -e "console.log('From Node:', process.env.PR_NUMBER);" 
  Bit-init:
    uses: ./.github/workflows/bit-init.yml  
    secrets:
      BIT_CONFIG_USER_TOKEN: ${{ secrets.BIT_CONFIG_USER_TOKEN }}
  Bit-verify:
    needs: Bit-init  
    uses: ./.github/workflows/verify.yml  
    secrets:
      BIT_CONFIG_USER_TOKEN: ${{ secrets.BIT_CONFIG_USER_TOKEN }}        
  Bit-pull-request:
    needs: Bit-verify  
    uses: ./.github/workflows/pull-request.yml  
    secrets:
      BIT_CONFIG_USER_TOKEN: ${{ secrets.BIT_CONFIG_USER_TOKEN }}  
#    Own-pull-request:
#      needs: Bit-verify  
#      uses: ./.github/workflows/own-workflow.yml  
#      secrets:
#        BIT_CONFIG_USER_TOKEN: ${{ secrets.BIT_CONFIG_USER_TOKEN }}  

